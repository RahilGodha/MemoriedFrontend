{"ast":null,"code":"import _slicedToArray from\"D:/Coding/Projects/my-memories/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import{AppBar,Avatar,Button,Toolbar,Typography}from'@material-ui/core';import{Link,useHistory,useLocation}from'react-router-dom';import memoriesLogo from'../../Images/memories-Logo.png';import memoriesText from'../../Images/memories-Text.png';import useStyles from'./styles.js';import decode from'jwt-decode';import{useDispatch}from'react-redux';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Navbar=function Navbar(){var classes=useStyles();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];// const user = null;\nconsole.log(user);var dispatch=useDispatch();var history=useHistory();var location=useLocation();var logout=function logout(){dispatch({type:'LOGOUT'});history.push('/');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/_jsxs(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\",children:[/*#__PURE__*/_jsxs(Link,{to:\"/\",className:classes.brandContainer,children:[/*#__PURE__*/_jsx(\"img\",{src:memoriesText,alt:\"icon\",height:\"45px\"}),/*#__PURE__*/_jsx(\"img\",{className:classes.image,src:memoriesLogo,alt:\"memories\",height:\"40px\"})]}),/*#__PURE__*/_jsx(Toolbar,{className:classes.toolbar,children:user?/*#__PURE__*/_jsxs(\"div\",{className:classes.profile,children:[/*#__PURE__*/_jsx(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.picture,children:\"user.result.name.chatAt(0)\"}),/*#__PURE__*/_jsx(Typography,{className:classes.userName,variant:\"h6\",children:user.result.name}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout,children:\"Logout\"})]}):/*#__PURE__*/_jsx(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\",children:\"Sign In\"})})]});};export default Navbar;","map":{"version":3,"names":["React","useState","useEffect","AppBar","Avatar","Button","Toolbar","Typography","Link","useHistory","useLocation","memoriesLogo","memoriesText","useStyles","decode","useDispatch","jsx","_jsx","jsxs","_jsxs","Navbar","classes","_useState","JSON","parse","localStorage","getItem","_useState2","_slicedToArray","user","setUser","console","log","dispatch","history","location","logout","type","push","token","decodedToken","exp","Date","getTime","className","appBar","position","color","children","to","brandContainer","src","alt","height","image","toolbar","profile","purple","result","name","picture","userName","variant","onClick","component"],"sources":["D:/Coding/Projects/my-memories/client/src/Components/Navbar/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react'\r\nimport { AppBar, Avatar, Button, Toolbar, Typography } from '@material-ui/core';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport memoriesLogo from '../../Images/memories-Logo.png';\r\nimport memoriesText from '../../Images/memories-Text.png';\r\nimport useStyles from './styles.js';\r\nimport decode from 'jwt-decode';\r\nimport { useDispatch } from 'react-redux';\r\n\r\nconst Navbar = () => {\r\n    const classes = useStyles();\r\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n    // const user = null;\r\n    console.log(user);\r\n    const dispatch = useDispatch();\r\n    const history = useHistory();\r\n    const location = useLocation();\r\n    const logout = () => {\r\n        dispatch({ type: 'LOGOUT' });\r\n        history.push('/');\r\n        setUser(null);\r\n    }\r\n\r\n    useEffect(() => {\r\n        const token = user?.token;\r\n\r\n        if (token) {\r\n            const decodedToken = decode(token);\r\n\r\n            if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n        }\r\n\r\n        setUser(JSON.parse(localStorage.getItem('profile')))\r\n    }, [location])\r\n    return (\r\n        <AppBar className={classes.appBar} position='static' color='inherit'>\r\n            <Link to='/' className={classes.brandContainer}>\r\n                <img src={memoriesText} alt='icon' height='45px' />\r\n                <img className={classes.image} src={memoriesLogo} alt=\"memories\" height=\"40px\" />\r\n            </Link>\r\n            <Toolbar className={classes.toolbar}>\r\n                {user ? (\r\n                    <div className={classes.profile}>\r\n                        <Avatar className={classes.purple} alt={user.result.name} src={user.result.picture}>user.result.name.chatAt(0)</Avatar>\r\n                        <Typography className={classes.userName} variant='h6'>{user.result.name}</Typography>\r\n                        <Button variant='contained' className={classes.logout} color='secondary' onClick={logout}>Logout</Button>\r\n                    </div>\r\n                ) : (\r\n                    <Button component={Link} to=\"/auth\" variant='contained' color='primary'>Sign In</Button>\r\n                )}\r\n            </Toolbar>\r\n        </AppBar>\r\n    )\r\n}\r\n\r\nexport default Navbar"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}